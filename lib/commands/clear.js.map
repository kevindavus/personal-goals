{"version":3,"sources":["commands/clear.js"],"names":["path","require","fs","checkConf","confTypes","confAliases","confDir","ls","write","module","exports","command","aliases","usage","description","builder","yargs","default","handler","argv","type","includes","clear","remove","join","then"],"mappings":"AACA,MAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,MAAMC,KAAKD,QAAQ,UAAR,CAAX;AACA,MAAM,EAAEE,SAAF,EAAaC,SAAb,EAAwBC,WAAxB,EAAqCC,OAArC,KAAiDL,QAAQ,UAAR,CAAvD;AACA,MAAM,EAACM,EAAD,KAAON,QAAQ,MAAR,CAAb;AACA,MAAM,EAAEO,KAAF,KAAYP,QAAQ,mBAAR,CAAlB;;AAEAQ,OAAOC,OAAP,GAAiB;AACfC,WAAS,cADM;AAEfC,WAAS,CAAC,KAAD,CAFM;AAGfC,SAAQ,8BAHO;AAIfC,eAAc,uBAJC;AAKfC,WAAUC,KAAD,IACPA,MAAMC,OAAN,CAAc,MAAd,EAAsB,GAAtB,CANa;AAOfC,WAAUC,IAAD,IAA4B;AACnChB;;AAEA,QAAIiB,IAAJ;AACA,QAAIhB,UAAUiB,QAAV,CAAmBF,KAAKC,IAAxB,CAAJ,EAAmC;AACjCA,aAAOD,KAAKC,IAAZ;AACD,KAFD,MAEO,IAAI,OAAOf,YAAYc,KAAKC,IAAjB,CAAP,KAAkC,QAAtC,EAAgD;AACrDA,aAAOf,YAAYc,KAAKC,IAAjB,CAAP;AACD,KAFM,MAEA;AACL,cAAQD,KAAKC,IAAb;AACE,aAAK,GAAL;AACEA,iBAAO,KAAP;AACA;AACF,aAAK,UAAL;AACA,aAAK,GAAL;AACEA,iBAAO,WAAP;AACA;AACF;AACEA,iBAAOD,KAAKC,IAAZ;AACA;AAVJ;AAYD;AACDE,UAAMF,IAAN;AACD;AA9Bc,CAAjB;;AAiCA,SAASE,KAAT,CAAeF,IAAf,EAA6B;AAC3B,MAAIA,SAAS,KAAb,EAAoB;AAClBlB,OAAGqB,MAAH,CAAUvB,KAAKwB,IAAL,CAAUlB,OAAV,CAAV,EAA8BmB,IAA9B,CAAmC,MAAM;AACvClB,SAAG,KAAH;AACAC;AACD,KAHD;AAID,GALD,MAKO;AACLN,OAAGqB,MAAH,CAAUvB,KAAKwB,IAAL,CAAUlB,OAAV,EAAmBc,IAAnB,CAAV,EAAoCK,IAApC,CAAyC,MAAM;AAC7ClB,SAAG,KAAH;AACAC;AACD,KAHD;AAID;AACF","file":"clear.js","sourcesContent":["//@flow\nconst path = require(\"path\");\nconst fs = require(\"fs-extra\");\nconst { checkConf, confTypes, confAliases, confDir } = require(\"./config\");\nconst {ls} = require(\"./ls\")\nconst { write } = require(\"../utils/markdown\");\n\nmodule.exports = {\n  command: \"clear [type]\",\n  aliases: [\"clr\"],\n  usage: `$0 clear  <w, m, y, o, c, a>`,\n  description: `clear goals of a type`,\n  builder: (yargs: { default: (string, string) => mixed }) =>\n    yargs.default(\"type\", \"a\"),\n  handler: (argv: { type: string }) => {\n    checkConf();\n\n    let type: string;\n    if (confTypes.includes(argv.type)) {\n      type = argv.type;\n    } else if (typeof confAliases[argv.type] === \"string\") {\n      type = confAliases[argv.type];\n    } else {\n      switch (argv.type) {\n        case \"a\":\n          type = \"all\";\n          break;\n        case \"complete\":\n        case \"c\":\n          type = \"completed\";\n          break;\n        default:\n          type = argv.type;\n          break;\n      }\n    }\n    clear(type);\n  }\n};\n\nfunction clear(type: string) {\n  if (type === \"all\") {\n    fs.remove(path.join(confDir)).then(() => {\n      ls(\"all\");\n      write()\n    })\n  } else {\n    fs.remove(path.join(confDir, type)).then(() => {\n      ls(\"all\");\n      write()\n    });\n  }\n}\n"]}